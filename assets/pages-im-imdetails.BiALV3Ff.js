import{l as o,m as t,a as e,w as n,j as a,o as i,b as s,f as c,h as l,e as r,i as d,a8 as f}from"./index-2i5NzYaS.js";import{$ as h}from"./request.CmV1KS_Y.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";const p=g({data:()=>({Config:{},UserInfo:{},loading:!0}),onLoad(){console.log("Config",o("Config")),this.loading=!0,this.getConfig()},methods:{getConfig(){const e=this;this.UserInfo=o("UserInfo"),h.post("/app_user_get_config").then((o=>{if(200!=o.code)return this.loading=!1,t({title:o.msg,duration:1e3,icon:"none"});this.Config=o.data,this.$nextTick((()=>{var o,t,n,a;if(this.executeSalesmartlyScript(),2==e.Config.chat_type){if((null==(o=e.UserInfo)?void 0:o.phone)&&(e.Config.chat_007=e.Config.chat_007+"&phone="+e.UserInfo.phone),null==(t=e.UserInfo)?void 0:t.nickname){const o=e.UserInfo.nickname||"";e.Config.chat_007=e.Config.chat_007+"&userName="+o}if((null==(n=e.UserInfo)?void 0:n.uid)||(null==(a=e.UserInfo)?void 0:a.id)){const o=e.UserInfo.uid||e.UserInfo.id||"";e.Config.chat_007=e.Config.chat_007+"&pid="+o}console.log("chat_007",e.Config.chat_007)}this.loading=!1}))})).catch((o=>{console.log(o),this.loading=!1}))},executeSalesmartlyScript(){if(3==this.Config.chat_type&&this.Config.chat_salesmartly)try{const o=document.createElement("script");o.src="https://plugin-code.salesmartly.com/js/project_349563_359075_1748934649.js",o.async=!0,document.body.appendChild(o),o.onload=o.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)try{document.body.removeChild(o)}catch(t){console.warn("移除script标签时发生错误:",t)}}}catch(o){console.error("执行Salesmartly脚本时发生错误:",o)}}}},[["render",function(o,t,h,g,p,u){const _=a,m=d,y=f;return i(),e(_,null,{default:n((()=>[p.loading?(i(),e(_,{key:0,class:"loading-container"},{default:n((()=>[s(_,{class:"loading-spinner"}),s(m,{class:"loading-text"},{default:n((()=>[c("加载中...")])),_:1})])),_:1})):l("",!0),p.loading||1!=p.Config.chat_type?l("",!0):(i(),e(y,{key:1,src:p.Config.chat_link},null,8,["src"])),p.loading||2!=p.Config.chat_type?l("",!0):(i(),e(y,{key:2,src:p.Config.chat_007},null,8,["src"])),p.loading||3!=p.Config.chat_type?l("",!0):(i(),r("div",{key:3,ref:"salesmartlyContainer"},null,512))])),_:1})}],["__scopeId","data-v-8b1ae03e"]]);export{p as default};
