import{_ as o,l as n,m as t,a as e,w as a,j as i,o as s,b as c,f as l,h as r,e as f,i as d,a9 as g}from"./index-BrfRr25j.js";import{$ as h}from"./request.BcI2bJcs.js";const p=o({data:()=>({Config:{},UserInfo:{},loading:!0}),onLoad(){console.log("Config",n("Config")),this.loading=!0,this.getConfig()},methods:{getConfig(){const o=this;this.UserInfo=n("UserInfo"),h.post("/app_user_get_config").then((n=>{if(200!=n.code)return this.loading=!1,t({title:n.msg,duration:1e3,icon:"none"});this.Config=n.data,this.$nextTick((()=>{var n,t,e,a,i;if(this.executeSalesmartlyScript(),2==o.Config.chat_type){if((null==(n=o.UserInfo)?void 0:n.phone)&&(o.Config.chat_007=o.Config.chat_007+"&phone="+o.UserInfo.phone),null==(t=o.UserInfo)?void 0:t.nickname){const n=o.UserInfo.nickname||"";o.Config.chat_007=o.Config.chat_007+"&userName="+n}if((null==(e=o.UserInfo)?void 0:e.uid)||(null==(a=o.UserInfo)?void 0:a.id)){const n=o.UserInfo.uid||o.UserInfo.id||"";o.Config.chat_007=o.Config.chat_007+"&pid="+n}if(null==(i=o.UserInfo)?void 0:i.group){const n=o.UserInfo.group.name||"";o.Config.chat_007=o.Config.chat_007+"&email="+n}o.Config.chat_007=o.Config.chat_007+'&params={"userType":"vip","level":"gold"}'}this.loading=!1}))})).catch((o=>{console.log(o),this.loading=!1}))},executeSalesmartlyScript(){if(3==this.Config.chat_type&&this.Config.chat_salesmartly)try{const o=document.createElement("script");o.src="https://plugin-code.salesmartly.com/js/project_349563_359075_1748934649.js",o.async=!0,document.body.appendChild(o),o.onload=o.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)try{document.body.removeChild(o)}catch(n){console.warn("移除script标签时发生错误:",n)}}}catch(o){console.error("执行Salesmartly脚本时发生错误:",o)}}}},[["render",function(o,n,t,h,p,u){const _=i,C=d,m=g;return s(),e(_,null,{default:a((()=>[p.loading?(s(),e(_,{key:0,class:"loading-container"},{default:a((()=>[c(_,{class:"loading-spinner"}),c(C,{class:"loading-text"},{default:a((()=>[l("加载中...")])),_:1})])),_:1})):r("",!0),p.loading||1!=p.Config.chat_type?r("",!0):(s(),e(m,{key:1,src:p.Config.chat_link},null,8,["src"])),p.loading||2!=p.Config.chat_type?r("",!0):(s(),e(m,{key:2,src:p.Config.chat_007},null,8,["src"])),p.loading||3!=p.Config.chat_type?r("",!0):(s(),f("div",{key:3,ref:"salesmartlyContainer"},null,512))])),_:1})}],["__scopeId","data-v-19c24511"]]);export{p as default};
