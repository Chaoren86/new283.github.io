import{_ as t,H as a,l as e,s,m as l,K as n,q as o,k as i,v as u,a as c,w as d,j as r,o as m,b as p,f,g as b,h as _,x as v,e as h,r as g,F as y,n as k,a4 as x,y as w,i as I,D as C,z as B,I as S,a5 as D,E as L,a6 as N}from"./index-BrfRr25j.js";import{_ as $}from"./uni-popup.Cxea2kxR.js";import{r as E}from"./uni-app.es.Dyz4VRdN.js";import{$ as H}from"./request.BcI2bJcs.js";import{h as R,a as j,_ as F,b as q,c as A,d as T}from"./customer-icon.C9OAYTLS.js";import{_ as P}from"./goBack-icon.Dnnb51to.js";import{_ as U}from"./user.C18wHkI1.js";import{_ as V}from"./refresh-icon.DKxcLUp8.js";import{_ as z}from"./close-icon.CE_Px9pA.js";const K=t({data:()=>({typeText:["红包接龙","红包二八杠","红包扫雷","红包牛牛"],hongbaoicon:R,hongbaoiconN:j,configData:{},list:[],user_monye:0,time:null,lastItemId:null,postShow:!1,roomInfo:{},isSubmitting:!1,postData:{roomId:0,gameType:0,money:null},querFrom:{pagenum:1,pagesize:20,type:1},activeShow:!1,priceList:[10,50,100,500,1e3,5e3],price:null,numberList:[7,8,9],number:7,letNumberList:[0,1,2,3,4,5,6,7,8,9],leiNumber:0,submitLoading:!1,userInfo:{},HBdata:{}}),beforeCreate(){localStorage.getItem("isLoading")||a({title:"数据加载中",mask:!0})},onLoad(t){this.querFrom.type=this.postData.gameType=t.type,3==t.type&&(this.activeShow=!0),this.initAudio(),this.configData=e("Config"),this.postData.roomId=t.roomId,this.querFrom.roomId=t.roomId,this.getRoom(),this.getList(),this.getUserInfo()},methods:{initAudio(){const t=new(window.AudioContext||window.webkitAudioContext),a=new Audio("/static/mp3/comeIn.mp3");t.createMediaElementSource(a).connect(t.destination),a.play()},ophbAudio(){const t=new(window.AudioContext||window.webkitAudioContext),a=new Audio("/static/mp3/open.mp3");t.createMediaElementSource(a).connect(t.destination),a.play()},handleEnter(){this.postRedEnvelopes()},getUserInfo(){H.post("/app_user_get_userinfo").then((t=>{200==t.code&&(this.userInfo=t.data,s("UserInfo",t.data))}))},selectLei(t){this.leiNumber=t},selectNumber(t){this.number=t},postRedEnvelopes(){if(!this.isSubmitting){if(!this.postData.money)return l({title:"请输入下注金额",duration:1e3,icon:"none"});this.isSubmitting=!0,3==this.postData.gameType&&(this.postData.number=this.number,this.postData.leiNumber=this.leiNumber),H.post("/app_red_envelope_betpour",this.postData).then((t=>200==t.code?(this.closeSubBet(),this.closeBet(),this.getList(),l({title:"下注成功",duration:1e3,icon:"none"})):l({title:t.msg,duration:1e3,icon:"none"}))).finally((()=>{this.isSubmitting=!1}))}},getRoom(){H.post("/app_red_envelope_room_odds",{type:this.postData.gameType,roomId:this.postData.roomId}).then((t=>{console.log(t,"getRoom"),200==t.code&&(this.roomInfo=t.data)}))},getList(){H.post("/app_red_envelope_list",this.querFrom).then((t=>{200==t.code&&(this.list=t.data.data,this.user_monye=t.data.user_monye,setTimeout((()=>{this.lastItemId="item"+(this.list.length-1)}),10),localStorage.setItem("isLoading",!0),n())}))},toIm(){o({url:"/pages/im/im"})},openPostBox(){this.$refs.post.open()},closePost(){this.$refs.post.close()},openRule(){this.$refs.popup.open()},closeRoom(){this.$refs.popup.close()},openBetting(){3==this.roomInfo.type?this.$refs.betting.open():this.$refs.subbetting.open()},closeBet(){this.$refs.betting.close()},openSubBet(){this.$refs.subbetting.open()},closeSubBet(){this.postData.money=null,this.$refs.subbetting.close()},countPrice(t){this.postData.money=Number(this.postData.money)+Number(t)},closeHB(){this.$refs.hbEnvCoverPopup.close()},openHB(t){if(this.submitLoading)return;this.submitLoading=!0;let a=this;H.post("/app_red_envelope_rob",{id:t.id}).then((e=>{if(this.submitLoading=!1,200!=e.code)return l({title:e.msg,duration:1e3,icon:"none"});a.ophbAudio(),i({url:"/pages/game/hongbao/detail?id="+t.id}),this.$refs.hbEnvCoverPopup.close()}))},openHBCover(t){t.selectShow?i({url:"/pages/game/hongbao/detail?id="+t.id}):(this.HBdata=t,this.$refs.hbEnvCoverPopup.open())},updateList(){this.list=[],this.getList(),this.$nextTick((()=>{this.lastItemId="item"+(this.list.length-1)}))},updateLastItemId(t){},toIndex(){o({url:"/pages/index/index"})},toRecord(){i({url:`/pages/my/record/list?index=2&game_type=${this.querFrom.type}`})}},onShow(){this.time=setInterval((()=>{this.getList()}),3e3)},onUnload(){this.time&&(clearInterval(this.time),this.time=null),localStorage.removeItem("isLoading")},onHide(){this.time&&(clearInterval(this.time),this.time=null),localStorage.removeItem("isLoading")}},[["render",function(t,a,e,s,l,n){const o=w,i=r,H=I,R=C,j=B,K=S,M=D,W=E(u("uni-popup"),$),Y=L,G=N;return m(),c(i,{class:"room"},{default:d((()=>[p(i,{class:"w-750 w-bj-white",style:{position:"fixed",top:"0",left:"0","z-index":"999"}},{default:d((()=>[p(i,{class:"h-100 w-row-justify-between-align"},{default:d((()=>[p(i,{class:"wh-80 w-row-center",onClick:a[0]||(a[0]=a=>t.routerBack())},{default:d((()=>[p(o,{class:"wh-40",src:P})])),_:1}),p(i,{class:"flex1 h-100 w-row-center w-wz-conts font-36"},{default:d((()=>[p(H,null,{default:d((()=>[f(b(l.typeText[l.roomInfo.type-1]),1)])),_:1})])),_:1}),p(i,{class:"wh-80 w-row-center"})])),_:1})])),_:1}),p(i,{class:"bwh-120"}),p(i,{class:"content-box padding-top-xs"},{default:d((()=>[p(i,{class:"cover-tw index-bg absolute-default absolute top-bg disflex"},{default:d((()=>[p(i,{class:"padding-sm padding-top-xs padding-bottom-0 chat-user text-color-white number-font flex1"},{default:d((()=>[p(i,{class:"van-row van-row--align-center disflex"},{default:d((()=>[p(i,{class:"van-col van-col--12 rel disflex"},{default:d((()=>[l.userInfo.headimgurl?(m(),c(o,{key:0,src:l.userInfo.headimgurl,mode:"widthFix",class:"radius-sm avatar fl margin-right-xs"},null,8,["src"])):(m(),c(o,{key:1,src:U,mode:"widthFix",class:"radius-sm avatar fl margin-right-xs"})),p(i,null,{default:d((()=>[p(i,{class:"disflex"},{default:d((()=>[1==l.configData.vip_open?(m(),c(o,{key:0,class:"vip_icon",src:"/static/gane/vip_icon_"+(l.userInfo.vip?l.userInfo.vip:0)+".png",mode:"heightFix"},null,8,["src"])):_("",!0),f(" "+b(l.userInfo.nickname||"游客"),1)])),_:1}),v("span",{class:"line-height-none text-bold",style:{transform:"translateY(4rpx)"}}," 余额："+b(l.user_monye),1)])),_:1})])),_:1}),p(i,{class:"van-col van-col--12"},{default:d((()=>[p(i,{class:"fr wallet"},{default:d((()=>[p(R,{class:"van-button van-button--default van-button--small margin-left-xs",onClick:n.toIndex},{default:d((()=>[f(" 首页 ")])),_:1},8,["onClick"]),p(R,{class:"van-button van-button--default van-button--small margin-left-xs",onClick:a[1]||(a[1]=a=>t.routerWallet())},{default:d((()=>[f(" 上分 ")])),_:1}),p(R,{class:"van-button van-button--default van-button--small margin-left-xs",onClick:a[2]||(a[2]=a=>t.routerWallet())},{default:d((()=>[f(" 下分 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),p(j,{"scroll-y":"true",class:"chat-box padding-left-sm padding-right-sm padding-top-xs envelope","scroll-into-view":l.lastItemId},{default:d((()=>[l.list.length>0?(m(!0),h(y,{key:0},g(l.list,((t,a)=>(m(),c(i,{class:"fl full-width",key:a,id:`item${a}`},{default:d((()=>[p(i,{class:k(["cell packet",{"cell-r":t.userId===l.userInfo.uid}])},{default:d((()=>[p(i,{class:"full-width fl rel"},{default:d((()=>[p(i,{class:"avatar avatar-r"},{default:d((()=>[p(i,{class:"van-image"},{default:d((()=>[t.headimgurl&&t.userId==l.userInfo.uid?(m(),c(o,{key:0,src:t.headimgurl,class:"van-image__img"},null,8,["src"])):t.headimgurl?(m(),c(o,{key:1,src:t.headimgurl,class:"van-image__img"},null,8,["src"])):(m(),c(o,{key:2,src:U,class:"van-image__img"}))])),_:2},1024)])),_:2},1024),p(i,{class:"name name-r"},{default:d((()=>[1==l.configData.vip_open?(m(),c(o,{key:0,class:"vip_icon",src:"/static/gane/vip_icon_"+(t.vip?t.vip:1)+".png",mode:"heightFix"},null,8,["src"])):_("",!0),f(" "+b(t.nickname),1)])),_:2},1024),p(i,{class:k(["chat-item chat-item-r",{open:t.endNumber>=t.number||t.selectShow}]),onClick:a=>n.openHBCover(t)},{default:d((()=>[p(o,{class:"hongbao",src:t.endNumber>=t.number||t.selectShow?l.hongbaoiconN:l.hongbaoicon,mode:"widthFix"},null,8,["src"]),p(i,{class:"info line-height-sm"},{default:d((()=>[p(i,{class:"full-width fl"},{default:d((()=>[v("span",null," 金额 "+b(t.money),1),v("span",{class:"text-sm"},b(t.endNumber)+"/"+b(t.number),1)])),_:2},1024),p(i,{class:"full-width fl"},{default:d((()=>[v("span",{class:"text-sm"},b(t.endNumber>=t.number?"已被领完":t.selectShow?"已领取":"可领取"),1),3==t.type?(m(),h("span",{key:0},"雷"+b(t.leiNumber),1)):_("",!0)])),_:2},1024)])),_:2},1024),p(i,{class:"bar"},{default:d((()=>[v("b",null,"微信红包")])),_:1})])),_:2},1032,["class","onClick"])])),_:2},1024)])),_:2},1032,["class"])])),_:2},1032,["id"])))),128)):(m(),c(i,{key:1,class:"fl full-width"},{default:d((()=>[p(i,{class:"cell packet"},{default:d((()=>[p(i,{class:"full-width fl rel"},{default:d((()=>[p(i,{class:"avatar avatar-r"},{default:d((()=>[p(i,{class:"van-image"},{default:d((()=>[p(o,{src:F,class:"van-image__img"})])),_:1})])),_:1}),p(i,{class:"name name-r"},{default:d((()=>[f(" 管理员 "),v("div",{style:{margin:"0 15rpx"}})])),_:1}),p(i,{class:"chat-item chat-item-r"},{default:d((()=>[f(" 尊敬的贵宾您好，当前为平台封盘时间"),v("span",{style:{color:"red"}},"23:50~00:10"),f("，给你造成的不便，敬请谅解！ ")])),_:1})])),_:1})])),_:1})])),_:1}))])),_:1},8,["scroll-into-view"])])),_:1}),p(i,{class:"chat-menu full-width text-center"},{default:d((()=>[p(i,{class:"van-row van-row--align-center"},{default:d((()=>[p(i,{class:"van-col van-col--6",onClick:n.toRecord},{default:d((()=>[p(R,{class:"van-button van-button--default van-button--small van-button--round"},{default:d((()=>[p(i,{class:"van-button__content"},{default:d((()=>[p(o,{class:"icon",src:q,mode:""}),f(" 记录 ")])),_:1})])),_:1})])),_:1},8,["onClick"]),p(i,{class:"van-col van-col--6",onClick:n.openRule},{default:d((()=>[p(R,{class:"van-button van-button--default van-button--small van-button--round"},{default:d((()=>[p(i,{class:"van-button__content"},{default:d((()=>[p(o,{class:"icon",src:A,mode:""}),f(" 规则 ")])),_:1})])),_:1})])),_:1},8,["onClick"]),p(i,{class:"van-col van-col--6",onClick:a[3]||(a[3]=t=>n.toIm())},{default:d((()=>[p(R,{class:"van-button van-button--default van-button--small van-button--round"},{default:d((()=>[p(i,{class:"van-button__content"},{default:d((()=>[p(o,{class:"icon",src:T,mode:""}),f(" 客服 ")])),_:1})])),_:1})])),_:1}),p(i,{class:"van-col van-col--6",onClick:n.updateList},{default:d((()=>[p(R,{class:"van-button van-button--default van-button--small van-button--round"},{default:d((()=>[p(i,{class:"van-button__content"},{default:d((()=>[p(o,{class:"icon",src:V,mode:""}),f(" 刷新 ")])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),p(i,{class:"chat-tools"},{default:d((()=>[p(i,{class:"bar"},{default:d((()=>[p(i,{class:"quick text-center",onClick:n.openBetting},{default:d((()=>[f(" 快捷"),v("br"),f(" 发包 ")])),_:1},8,["onClick"])])),_:1}),p(i,{class:"funbar"},{default:d((()=>[p(K,{type:"text",class:"input",placeholder:"可输入玩法点数",modelValue:l.postData.money,"onUpdate:modelValue":a[4]||(a[4]=t=>l.postData.money=t)},null,8,["modelValue"])])),_:1}),p(i,{class:"send text-center text-color-white",onClick:n.postRedEnvelopes},{default:d((()=>[f(" 发送 ")])),_:1},8,["onClick"])])),_:1}),p(W,{ref:"popup",type:"bottom","border-radius":"10px 10px 0 0"},{default:d((()=>[p(i,{class:"gameDetailBox"},{default:d((()=>[p(i,{class:"padding-sm"},{default:d((()=>[p(i,{class:"padding-bottom-sm title font-24b"},{default:d((()=>[f(" 【"+b(l.typeText[l.roomInfo.type-1])+"介绍】 ",1),p(M,{nodes:l.roomInfo.desc},null,8,["nodes"]),p(o,{class:"close-icon",src:z,onClick:n.closeRoom},null,8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},512),p(W,{ref:"betting",type:"bottom","border-radius":"10px 10px 0 0"},{default:d((()=>[p(i,{class:"betting"},{default:d((()=>[p(i,{class:"padding-sm"},{default:d((()=>[p(i,{class:"padding-bottom-sm title"},{default:d((()=>[f(" 快捷下注 "),p(o,{class:"close-icon",src:z,onClick:n.closeBet},null,8,["onClick"])])),_:1})])),_:1}),p(i,null,{default:d((()=>[3!=l.roomInfo.type?(m(),c(i,{key:0,class:"padding-bottom-sm title sel"},{default:d((()=>[f(" 选玩法 ")])),_:1})):(m(),c(i,{key:1,class:"padding-bottom-sm title sel"},{default:d((()=>[f(" 选雷 ")])),_:1}))])),_:1}),p(i,{class:"van-tab__panel"},{default:d((()=>[p(i,{class:"van-row padding-top-sm"},{default:d((()=>[3!=l.roomInfo.type?(m(),c(i,{key:0,class:"van-col van-col--24 padding-xxs padding-top-0"},{default:d((()=>[p(R,{onClick:a[5]||(a[5]=t=>l.activeShow=!0),class:k([{active:l.activeShow},"van-button van-button--primary van-button--normal van-button--plain van-button--block van-button--hairline van-hairline--surround quickItem"])},{default:d((()=>[p(i,{class:"van-button__content"},{default:d((()=>[p(i,{class:"van-button__text"},{default:d((()=>[v("span",{class:"name"},b(l.typeText[l.roomInfo.type-1]),1)])),_:1})])),_:1})])),_:1},8,["class"])])),_:1})):(m(),c(i,{key:1,class:"van-col van-col--24 padding-xxs padding-top-0"},{default:d((()=>[p(i,{class:"lei-title"},{default:d((()=>[f("抢包人数")])),_:1}),p(i,{class:"lei-number-box"},{default:d((()=>[(m(!0),h(y,null,g(l.numberList,((t,a)=>(m(),c(R,{onClick:a=>n.selectNumber(t),class:k([l.number==t?"active":"","van-button van-button--primary van-button--normal van-button--plain van-button--block van-button--hairline van-hairline--surround quickItem"]),key:a},{default:d((()=>[p(i,{class:"van-button__content"},{default:d((()=>[p(i,{class:"van-button__text"},{default:d((()=>[v("span",{class:"name"},b(t),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),p(i,{class:"lei-title"},{default:d((()=>[f("选雷")])),_:1}),p(i,{class:"van-row"},{default:d((()=>[(m(!0),h(y,null,g(l.letNumberList,((t,a)=>(m(),c(R,{onClick:a=>n.selectLei(t),class:k([l.leiNumber==t?"active":"","van-col--5 van-button van-button--primary van-button--normal van-button--plain van-button--block van-button--hairline van-hairline--surround quickItem"]),key:a},{default:d((()=>[p(i,{class:"van-button__content"},{default:d((()=>[p(i,{class:"van-button__text"},{default:d((()=>[v("span",{class:"name"},"雷"+b(t),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1}))])),_:1})])),_:1}),p(i,{class:"submit-bar"},{default:d((()=>[p(i,{class:"van-submit-bar van-safe-area-bottom"},{default:d((()=>[p(i,{class:"van-submit-bar__bar"},{default:d((()=>[p(i,{class:"van-submit-bar__text",style:{"text-align":"left"}},{default:d((()=>[f(" 共 "),v("span",{class:"van-submit-bar__price-integer"},b(l.activeShow?1:0),1),f(" 注 ")])),_:1}),p(R,{onClick:n.openSubBet,disabled:!l.activeShow,class:"van-button van-button--danger van-button--normal van-button--round van-submit-bar__button van-submit-bar__button--danger"},{default:d((()=>[f(" 下一步 ")])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),p(W,{ref:"subbetting",type:"bottom","border-radius":"10px 10px 0 0"},{default:d((()=>[p(i,{class:"betting"},{default:d((()=>[p(i,{class:"padding-sm"},{default:d((()=>[p(i,{class:"padding-bottom-sm title"},{default:d((()=>[f(" 确认发包金额 "),p(o,{class:"close-icon",src:z,onClick:n.closeSubBet},null,8,["onClick"])])),_:1})])),_:1}),p(i,{class:"van-cell van-field disflex"},{default:d((()=>[p(i,{class:"van-cell__title van-field__label"},{default:d((()=>[p(Y,{for:"van-field-4-input"},{default:d((()=>[f("下注金额")])),_:1})])),_:1}),p(i,{class:"van-cell__value van-field__value"},{default:d((()=>[p(i,{class:"van-field__body"},{default:d((()=>[p(K,{id:"van-field-27-input",type:"number",min:"1",step:"1",modelValue:l.postData.money,"onUpdate:modelValue":a[6]||(a[6]=t=>l.postData.money=t),class:"van-field__control",placeholder:"请输入下注金额",onConfirm:n.handleEnter},null,8,["modelValue","onConfirm"])])),_:1})])),_:1}),p(i,{class:"van-col van-col--3 margin-bottom-xs title-align",onClick:a[7]||(a[7]=t=>l.postData.money=null)},{default:d((()=>[p(i,{class:"keybordBtn"},{default:d((()=>[f(" 清空 ")])),_:1})])),_:1})])),_:1}),p(i,{class:"margin-top-sm title-align"},{default:d((()=>[f(" 快速选择 ")])),_:1}),p(i,{class:"van-row margin-top-sm"},{default:d((()=>[(m(!0),h(y,null,g(l.priceList,((t,a)=>(m(),c(i,{class:"van-col van-col--3 margin-bottom-xs title-align",key:a,onClick:a=>n.countPrice(t)},{default:d((()=>[p(i,{class:"keybordBtn"},{default:d((()=>[f(b(t),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),p(i,{class:"van-col van-col--3 margin-bottom-xs title-align",onClick:a[8]||(a[8]=t=>l.postData.money=null)},{default:d((()=>[p(i,{class:"keybordBtn"},{default:d((()=>[f(" 清空 ")])),_:1})])),_:1})])),_:1}),p(i,{class:"submit-bar"},{default:d((()=>[p(i,{class:"van-submit-bar van-safe-area-bottom"},{default:d((()=>[p(i,{class:"van-submit-bar__bar"},{default:d((()=>[p(R,{onClick:a[9]||(a[9]=t=>n.postRedEnvelopes()),style:{margin:"0 auto"},class:"van-button van-button--danger van-button--normal van-button--round van-submit-bar__button van-submit-bar__button--danger"},{default:d((()=>[f(" 确认发包 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),p(W,{ref:"hbEnvCoverPopup",type:"center","mask-click":!1},{default:d((()=>[v("div",{class:"hbEnvCoverBox",onClick:a[11]||(a[11]=t=>n.openHB(l.HBdata))},[p(o,{onClick:a[10]||(a[10]=x((t=>n.closeHB()),["stop"])),class:"gb-icon",src:"/assets/gb-C1_AswTR.png",mode:"widthFix"}),p(i,{class:"title"},{default:d((()=>[v("span",{class:"name"},[l.HBdata.headimgurl?(m(),c(o,{key:0,src:l.HBdata.headimgurl,class:"van-image__img"},null,8,["src"])):(m(),c(o,{key:1,src:U,class:"van-image__img"})),f(" "+b(l.HBdata.nickname)+"的红包 ",1)])])),_:1})])])),_:1},512),p(G,{"canvas-id":"audioComeIn",style:{display:"none"}})])),_:1})}],["__scopeId","data-v-1ead54f2"]]);export{K as default};
