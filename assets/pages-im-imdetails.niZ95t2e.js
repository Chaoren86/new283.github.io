import{l as o,m as n,a as e,w as t,j as a,o as i,b as s,f as l,h as c,e as r,i as f,a8 as d}from"./index-CzPo0QPm.js";import{$ as g}from"./request.BhjEuznL.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const p=h({data:()=>({Config:{},UserInfo:{},loading:!0}),onLoad(){console.log("Config",o("Config")),this.loading=!0,this.getConfig()},methods:{getConfig(){const e=this;this.UserInfo=o("UserInfo"),g.post("/app_user_get_config").then((o=>{if(200!=o.code)return this.loading=!1,n({title:o.msg,duration:1e3,icon:"none"});this.Config=o.data,this.$nextTick((()=>{var o,n,t,a,i;if(this.executeSalesmartlyScript(),2==e.Config.chat_type){if((null==(o=e.UserInfo)?void 0:o.phone)&&(e.Config.chat_007=e.Config.chat_007+"&phone="+e.UserInfo.phone),null==(n=e.UserInfo)?void 0:n.nickname){const o=e.UserInfo.nickname||"";e.Config.chat_007=e.Config.chat_007+"&userName="+o}if((null==(t=e.UserInfo)?void 0:t.uid)||(null==(a=e.UserInfo)?void 0:a.id)){const o=e.UserInfo.uid||e.UserInfo.id||"";e.Config.chat_007=e.Config.chat_007+"&pid="+o}if(null==(i=e.UserInfo)?void 0:i.group){const o=e.UserInfo.group.name||"";e.Config.chat_007=e.Config.chat_007+"&email="+o}e.Config.chat_007=e.Config.chat_007+'&params={"userType":"vip","level":"gold"}'}this.loading=!1}))})).catch((o=>{console.log(o),this.loading=!1}))},executeSalesmartlyScript(){if(3==this.Config.chat_type&&this.Config.chat_salesmartly)try{const o=document.createElement("script");o.src="https://plugin-code.salesmartly.com/js/project_349563_359075_1748934649.js",o.async=!0,document.body.appendChild(o),o.onload=o.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)try{document.body.removeChild(o)}catch(n){console.warn("移除script标签时发生错误:",n)}}}catch(o){console.error("执行Salesmartly脚本时发生错误:",o)}}}},[["render",function(o,n,g,h,p,u){const _=a,m=f,C=d;return i(),e(_,null,{default:t((()=>[p.loading?(i(),e(_,{key:0,class:"loading-container"},{default:t((()=>[s(_,{class:"loading-spinner"}),s(m,{class:"loading-text"},{default:t((()=>[l("加载中...")])),_:1})])),_:1})):c("",!0),p.loading||1!=p.Config.chat_type?c("",!0):(i(),e(C,{key:1,src:p.Config.chat_link},null,8,["src"])),p.loading||2!=p.Config.chat_type?c("",!0):(i(),e(C,{key:2,src:p.Config.chat_007},null,8,["src"])),p.loading||3!=p.Config.chat_type?c("",!0):(i(),r("div",{key:3,ref:"salesmartlyContainer"},null,512))])),_:1})}],["__scopeId","data-v-19c24511"]]);export{p as default};
