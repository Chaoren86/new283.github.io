import{_ as e,l as a,N as s,m as t,T as l,H as c,K as o,k as i,v as n,A as d,B as u,a as r,w as _,j as f,o as h,b as p,f as m,g,n as w,e as b,r as v,F as y,h as k,x,y as C,i as D,D as j}from"./index-BrfRr25j.js";import{_ as S}from"./uni-popup.Cxea2kxR.js";import{r as I}from"./uni-app.es.Dyz4VRdN.js";import{$ as z}from"./request.BcI2bJcs.js";import{_ as $}from"./goBack-icon.Dnnb51to.js";import{_ as q}from"./zwsj.YT3FapE5.js";import{_ as F,a as U}from"./qrcode-icon.CEcbgVe2.js";const R=e({data:()=>({inviteShow:!1,show:!1,UserInfo:{},tableData:{},grade:"一级",date:"今日",dateMore:!1,page:1,list:[],loadStatus:"loadmore"}),onLoad(){if(this.UserInfo=a("UserInfo"),!this.UserInfo.uid||!this.UserInfo.token)return s({url:"/pages/index/index"});this.getData(),this.get_list()},onReachBottom(){this.get_list()},methods:{selSaveItem(e){"link"==e?this.copys(this.tableData.agent_url):this.$refs.qrcode_popup.open(),this.$refs.save_popup.close()},closeQRcodeSave(){this.$refs.qrcode_popup.close()},saveOpen(){this.$refs.save_popup.open()},closeQRcodeSave(){this.$refs.qrcode_popup.close()},closeSave(){this.$refs.save_popup.close()},copys(e){let a=e,s=document.createElement("input");s.value=a,document.body.appendChild(s),s.select(),document.execCommand("Copy"),t({title:"复制成功",icon:"none"}),s.remove()},submitForm(){if(Number(this.tableData.agent_money<10))return t({title:"转入金额必须大于10元",duration:1e3,icon:"none"});let e=this;l({title:"佣金操作",content:`本次转入 ￥${e.tableData.agent_money}元，到账户余额？`,cancelText:"取消",confirmText:"确定",success:function(a){a.confirm?z.post("/app_user_agent_money").then((a=>{200==a.code?(t({title:a.msg,duration:2e3,icon:"none"}),e.getData()):t({title:a.msg,duration:2e3,icon:"none"})})):a.cancel}})},getData(){z.post("/app_user_agent",{domain:window.location.origin,grade:this.grade,date:this.date}).then((e=>{if(console.log(e),200!=e.code)return t({title:e.msg,duration:1e3,icon:"none"});this.tableData=e.data,this.show=!0}))},list_change(e,a){"grade"==a?this.grade=e:(this.date=e,this.dateMore=!1),this.page=1,this.list=[],this.loadStatus="loadmore",this.getData(),this.get_list()},get_list(){"loadmore"==this.loadStatus&&(this.loadStatus="loading",c({}),z.post("/app_user_agent_log",{type:"list",grade:this.grade,date:this.date,pagenum:this.page}).then((e=>{if(o(),console.log(e),200!=e.code)return t({title:e.msg,duration:1e3,icon:"none"});this.page>=e.data.last_page?this.loadStatus="nomore":(this.loadStatus="loadmore",this.page++),this.list=this.list.concat(e.data.data),this.show=!0})))},copyLink(e){this.copys(e)},copys(e){let a=e,s=document.createElement("input");s.value=a,document.body.appendChild(s),s.select(),document.execCommand("Copy"),t({title:"复制成功",icon:"none"}),s.remove()},go_xiazhu(e){i({url:"/pages/my/order/order?user_uid="+e.uid})},RouteIndex(e,a){i({url:`/pages/my/agent/${e}?type=${a}`})}}},[["render",function(e,a,s,t,l,c){const o=C,i=f,z=D,R=j,B=I(n("uni-popup"),S);return d((h(),r(i,{class:"content"},{default:_((()=>[p(i,{class:"w-750 w-bj-cont",style:{position:"fixed",top:"0",left:"0","z-index":"9"}},{default:_((()=>[p(i,{class:"h-100 w-row-justify-between-align"},{default:_((()=>[p(i,{class:"wh-80 w-row-center",onClick:a[0]||(a[0]=a=>e.routerBack())},{default:_((()=>[p(o,{class:"wh-40",src:$})])),_:1}),p(i,{class:"flex1 h-100 w-row-center w-wz-conts font-36"},{default:_((()=>[m("代理中心")])),_:1}),l.UserInfo.is_agent?(h(),r(i,{key:0,class:"wh-130 w-row-center w-wz-conts p-right-14 disflex",onClick:a[1]||(a[1]=e=>c.saveOpen())},{default:_((()=>[p(o,{class:"save-icon",src:"/assets/add-user-D-4tipsm.png",mode:"widthFix"}),m(" 邀请 ")])),_:1})):(h(),r(i,{key:1,class:"wh-130 w-row-center w-wz-conts p-right-14"}))])),_:1})])),_:1}),p(i,{class:"bwh-100"}),p(i,{class:"bwh-20"}),p(i,{class:"w-720 w-bj-cont w-bor-12 w-column-align"},{default:_((()=>[p(i,{class:"top_wrap"},{default:_((()=>[p(i,{class:"item"},{default:_((()=>[p(i,{class:"label"},{default:_((()=>[m("总人数")])),_:1}),p(i,{class:"val"},{default:_((()=>[m(g(l.tableData.agent_all_count),1)])),_:1})])),_:1}),p(i,{class:"item"},{default:_((()=>[p(i,{class:"label"},{default:_((()=>[m("佣金余额")])),_:1}),p(i,{class:"val"},{default:_((()=>[m("¥ "),p(z,{class:"num"},{default:_((()=>[m(g(l.tableData.agent_money),1)])),_:1}),m(" 元")])),_:1})])),_:1}),p(i,{class:"item",style:{display:"flex","align-items":"center","justify-content":"center"}},{default:_((()=>[p(R,{type:"primary",size:"mini",onClick:a[2]||(a[2]=e=>c.submitForm())},{default:_((()=>[m("转入钱包")])),_:1})])),_:1})])),_:1}),p(i,{class:"top_wrap"},{default:_((()=>[p(i,{class:"item"},{default:_((()=>[p(i,{class:"label"},{default:_((()=>[m("总输赢")])),_:1}),p(i,{class:"val"},{default:_((()=>[m("¥ "),p(z,{class:"num"},{default:_((()=>[m(g(l.tableData.total_sy),1)])),_:1}),m(" 元")])),_:1})])),_:1}),p(i,{class:"item"},{default:_((()=>[p(i,{class:"label"},{default:_((()=>[m(g(l.date)+"总上分",1)])),_:1}),p(i,{class:"val"},{default:_((()=>[m("¥ "),p(z,{class:"num"},{default:_((()=>[m(g(l.tableData.sanfen),1)])),_:1}),m(" 元")])),_:1})])),_:1}),p(i,{class:"item"},{default:_((()=>[p(i,{class:"label"},{default:_((()=>[m(g(l.date)+"总下分",1)])),_:1}),p(i,{class:"val"},{default:_((()=>[m("¥ "),p(z,{class:"num"},{default:_((()=>[m(g(l.tableData.xiafen),1)])),_:1}),m(" 元")])),_:1})])),_:1})])),_:1}),p(i,{class:"date_bar"},{default:_((()=>[p(i,{class:w(["item",{active:"一级"==l.grade}]),onClick:a[3]||(a[3]=e=>c.list_change("一级","grade"))},{default:_((()=>[m("一级")])),_:1},8,["class"]),p(i,{class:w(["item",{active:"二级"==l.grade}]),onClick:a[4]||(a[4]=e=>c.list_change("二级","grade"))},{default:_((()=>[m("二级")])),_:1},8,["class"]),p(i,{class:w(["item",{active:"三级"==l.grade}]),onClick:a[5]||(a[5]=e=>c.list_change("三级","grade"))},{default:_((()=>[m("三级")])),_:1},8,["class"]),p(i,{class:"item",onClick:a[6]||(a[6]=e=>l.dateMore=!0)},{default:_((()=>[m(g(l.date)+" ",1),p(o,{src:$})])),_:1}),d(p(i,{class:"more"},{default:_((()=>[p(i,{class:w(["item2",{active2:"今日"==l.date}]),onClick:a[7]||(a[7]=e=>c.list_change("今日","date"))},{default:_((()=>[m("今日")])),_:1},8,["class"]),p(i,{class:w(["item2",{active2:"三天"==l.date}]),onClick:a[8]||(a[8]=e=>c.list_change("三天","date"))},{default:_((()=>[m("三天")])),_:1},8,["class"]),p(i,{class:w(["item2",{active2:"本周"==l.date}]),onClick:a[9]||(a[9]=e=>c.list_change("本周","date"))},{default:_((()=>[m("本周")])),_:1},8,["class"]),p(i,{class:w(["item2",{active2:"本月"==l.date}]),onClick:a[10]||(a[10]=e=>c.list_change("本月","date"))},{default:_((()=>[m("本月")])),_:1},8,["class"])])),_:1},512),[[u,l.dateMore]])])),_:1}),p(i,{class:"list"},{default:_((()=>[(h(!0),b(y,null,v(l.list,(e=>(h(),r(i,{class:"item"},{default:_((()=>[p(i,{class:"box1"},{default:_((()=>[p(o,{class:"avatar",src:e.headimgurl?e.headimgurl:"/static/gane/user.png",mode:"aspectFill"},null,8,["src"]),e.nickname.includes("****")?(h(),r(i,{key:0,class:"nickname"},{default:_((()=>[m(g(e.phone),1)])),_:2},1024)):(h(),r(i,{key:1,class:"nickname"},{default:_((()=>[m(g(e.nickname),1)])),_:2},1024))])),_:2},1024),p(i,{class:"box2"},{default:_((()=>[p(i,{class:"box2_item"},{default:_((()=>[p(i,{class:"label"},{default:_((()=>[m(g(l.date)+"上分",1)])),_:1}),p(i,{class:"val"},{default:_((()=>[m("￥"+g(e.sanfen),1)])),_:2},1024)])),_:2},1024),p(i,{class:"box2_item"},{default:_((()=>[p(i,{class:"label"},{default:_((()=>[m(g(l.date)+"下分",1)])),_:1}),p(i,{class:"val"},{default:_((()=>[m("￥"+g(e.xiafen),1)])),_:2},1024)])),_:2},1024),p(i,{class:"box2_item"},{default:_((()=>[p(i,{class:"label"},{default:_((()=>[m(g(l.date)+"输赢",1)])),_:1}),e.shuying>=0?(h(),r(i,{key:0,class:"val"},{default:_((()=>[e.shuying>0?(h(),b("span",{key:0},"+")):k("",!0),m("￥"+g(e.shuying),1)])),_:2},1024)):k("",!0),e.shuying<0?(h(),r(i,{key:1,class:"val"},{default:_((()=>[m("-￥"+g(Math.abs(e.shuying)),1)])),_:2},1024)):k("",!0)])),_:2},1024)])),_:2},1024),p(i,{class:"box3"},{default:_((()=>[p(i,{class:"btn",onClick:a=>c.go_xiazhu(e)},{default:_((()=>[m("下注记录")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),256)),l.list.length<=0?(h(),r(i,{key:0,class:"empty"},{default:_((()=>[p(o,{class:"wh-150",src:q}),p(i,{class:"w-wz-conts"},{default:_((()=>[m("暂 无 数 据 ")])),_:1})])),_:1})):k("",!0)])),_:1})])),_:1}),p(B,{style:{"z-index":"999"},ref:"save_popup",type:"bottom"},{default:_((()=>[p(i,{class:"w-bj-white saveBox"},{default:_((()=>[p(i,{class:"van-share-sheet__header"},{default:_((()=>[x("h2",{class:"van-share-sheet__title"},"立即分享给好友")])),_:1}),p(i,{class:"van-share-sheet__options"},{default:_((()=>[p(i,{class:"save-items",onClick:a[11]||(a[11]=e=>c.selSaveItem("link"))},{default:_((()=>[p(o,{src:F,mode:"widthFix"}),p(i,{class:""},{default:_((()=>[m(" 复制链接 ")])),_:1})])),_:1}),p(i,{class:"save-items",onClick:a[12]||(a[12]=e=>c.selSaveItem("qrcode"))},{default:_((()=>[p(o,{src:U,mode:"widthFix"}),p(i,{class:""},{default:_((()=>[m(" 二维码 ")])),_:1})])),_:1})])),_:1}),p(R,{type:"button",class:"van-share-sheet__cancel",onClick:a[13]||(a[13]=e=>c.closeSave())},{default:_((()=>[m("取消")])),_:1})])),_:1})])),_:1},512),p(B,{style:{"z-index":"999"},ref:"qrcode_popup",type:"center"},{default:_((()=>[p(i,{class:"w-bj-white w-600 w-col-center w-bor-25"},{default:_((()=>[p(o,{src:l.tableData.agent_code,class:"w-bor-25",style:{width:"600rpx",height:"600rpx"}},null,8,["src"]),p(R,{type:"button",class:"van-share-sheet__cancel",onClick:a[14]||(a[14]=e=>c.closeQRcodeSave())},{default:_((()=>[m("取消")])),_:1})])),_:1})])),_:1},512)])),_:1},512)),[[u,l.show]])}],["__scopeId","data-v-ebca2c22"]]);export{R as default};
